syntax = "proto3";

package msg;
option go_package = "./msg";

service Messenger{
  rpc SendMsg (MsgSlice) returns (MsgSlice) {}
}

//Types of messages nodes can send to one another
enum Type{
  Prepare = 0;
  Promise = 1;
  Propose = 2;
  Accept = 3;
}

//Data type used for inter-node communication
message Msg{
  Type type  = 1;
  int64 id = 2;
  string value = 3;
  int64 previousId = 4; //id of previously accepted value
}

message MsgSlice{
  map<int32, Msg> msgs = 1;
}